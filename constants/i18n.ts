
import { I18n } from 'i18n-js';
import * as Localization from 'expo-localization';
import AsyncStorage from '@react-native-async-storage/async-storage';

// Define translations
const translations = {
  en: {
    welcome: 'Welcome to MXI Liquidity Pool',
    login: 'Login',
    register: 'Register',
    email: 'Email',
    password: 'Password',
    confirmPassword: 'Confirm Password',
    fullName: 'Full Name',
    idNumber: 'ID Number',
    address: 'Address',
    forgotPassword: 'Forgot Password?',
    dontHaveAccount: "Don't have an account?",
    alreadyHaveAccount: 'Already have an account?',
    signUp: 'Sign Up',
    signIn: 'Sign In',
    home: 'Home',
    profile: 'Profile',
    referrals: 'Referrals',
    withdraw: 'Withdraw',
    deposit: 'Deposit',
    poolProgress: 'Pool Progress',
    participants: 'Participants',
    totalRaised: 'Total Raised',
    launchCountdown: 'Launch Countdown',
    yourBalance: 'Your Balance',
    referralCode: 'Referral Code',
    copyCode: 'Copy Code',
    shareCode: 'Share Code',
    referralStats: 'Referral Stats',
    level1: 'Level 1',
    level2: 'Level 2',
    level3: 'Level 3',
    totalCommissions: 'Total Commissions',
    availableToWithdraw: 'Available to Withdraw',
    withdrawalRequirements: 'Withdrawal Requirements',
    requirement1: '5 active Level 1 referrals',
    requirement2: '10 days cycle completed',
    withdrawFunds: 'Withdraw Funds',
    depositFunds: 'Deposit Funds',
    minimumDeposit: 'Minimum Deposit',
    maximumDeposit: 'Maximum Deposit',
    connectBinanceWallet: 'Connect Binance Wallet',
    transactionHistory: 'Transaction History',
    logout: 'Logout',
    settings: 'Settings',
    language: 'Language',
    notifications: 'Notifications',
    security: 'Security',
    support: 'Support',
    about: 'About',
    termsAndConditions: 'Terms and Conditions',
    privacyPolicy: 'Privacy Policy',
    version: 'Version',
    mxiBalance: 'MXI Balance',
    usdtBalance: 'USDT Balance',
    currentPrice: 'Current Price',
    priceChange24h: '24h Change',
    marketCap: 'Market Cap',
    volume24h: '24h Volume',
    buyMXI: 'Buy MXI',
    sellMXI: 'Sell MXI',
    amount: 'Amount',
    total: 'Total',
    buy: 'Buy',
    sell: 'Sell',
    cancel: 'Cancel',
    confirm: 'Confirm',
    success: 'Success',
    error: 'Error',
    loading: 'Loading...',
    pleaseWait: 'Please wait...',
    somethingWentWrong: 'Something went wrong',
    tryAgain: 'Try Again',
    noDataAvailable: 'No data available',
    refresh: 'Refresh',
    search: 'Search',
    filter: 'Filter',
    sort: 'Sort',
    apply: 'Apply',
    reset: 'Reset',
    save: 'Save',
    edit: 'Edit',
    delete: 'Delete',
    view: 'View',
    close: 'Close',
    back: 'Back',
    next: 'Next',
    previous: 'Previous',
    finish: 'Finish',
    skip: 'Skip',
    done: 'Done',
    yes: 'Yes',
    no: 'No',
    ok: 'OK',
    payWithUSDT: 'Pay with USDT',
    paymentHistory: 'Payment History',
    pendingPayments: 'Pending Payments',
    completedPayments: 'Completed Payments',
    failedPayments: 'Failed Payments',
    paymentDetails: 'Payment Details',
    paymentId: 'Payment ID',
    paymentDate: 'Payment Date',
    paymentAmount: 'Payment Amount',
    paymentStatus: 'Payment Status',
    paymentMethod: 'Payment Method',
    transactionId: 'Transaction ID',
    blockchainExplorer: 'Blockchain Explorer',
    viewOnExplorer: 'View on Explorer',
    copyTransactionId: 'Copy Transaction ID',
    shareTransaction: 'Share Transaction',
    downloadReceipt: 'Download Receipt',
    contactSupport: 'Contact Support',
    reportIssue: 'Report Issue',
    faq: 'FAQ',
    helpCenter: 'Help Center',
    tutorials: 'Tutorials',
    documentation: 'Documentation',
    community: 'Community',
    forum: 'Forum',
    blog: 'Blog',
    news: 'News',
    updates: 'Updates',
    announcements: 'Announcements',
    maintenance: 'Maintenance',
    downtime: 'Downtime',
    scheduled: 'Scheduled',
    unscheduled: 'Unscheduled',
    resolved: 'Resolved',
    investigating: 'Investigating',
    identified: 'Identified',
    monitoring: 'Monitoring',
    update: 'Update',
    onlyUseCommissionsOrChallenges: 'Informative Notice: Tournaments are being implemented. They will be updated until optimal functionality and quality are achieved, as the Project develops.',
  },
  es: {
    welcome: 'Bienvenido al Pool de Liquidez MXI',
    login: 'Iniciar Sesión',
    register: 'Registrarse',
    email: 'Correo Electrónico',
    password: 'Contraseña',
    confirmPassword: 'Confirmar Contraseña',
    fullName: 'Nombre Completo',
    idNumber: 'Número de Identificación',
    address: 'Dirección',
    forgotPassword: '¿Olvidaste tu contraseña?',
    dontHaveAccount: '¿No tienes una cuenta?',
    alreadyHaveAccount: '¿Ya tienes una cuenta?',
    signUp: 'Registrarse',
    signIn: 'Iniciar Sesión',
    home: 'Inicio',
    profile: 'Perfil',
    referrals: 'Referidos',
    withdraw: 'Retirar',
    deposit: 'Depositar',
    poolProgress: 'Progreso del Pool',
    participants: 'Participantes',
    totalRaised: 'Total Recaudado',
    launchCountdown: 'Cuenta Regresiva',
    yourBalance: 'Tu Saldo',
    referralCode: 'Código de Referido',
    copyCode: 'Copiar Código',
    shareCode: 'Compartir Código',
    referralStats: 'Estadísticas de Referidos',
    level1: 'Nivel 1',
    level2: 'Nivel 2',
    level3: 'Nivel 3',
    totalCommissions: 'Comisiones Totales',
    availableToWithdraw: 'Disponible para Retirar',
    withdrawalRequirements: 'Requisitos de Retiro',
    requirement1: '5 referidos activos de Nivel 1',
    requirement2: 'Ciclo de 10 días completado',
    withdrawFunds: 'Retirar Fondos',
    depositFunds: 'Depositar Fondos',
    minimumDeposit: 'Depósito Mínimo',
    maximumDeposit: 'Depósito Máximo',
    connectBinanceWallet: 'Conectar Billetera Binance',
    transactionHistory: 'Historial de Transacciones',
    logout: 'Cerrar Sesión',
    settings: 'Configuración',
    language: 'Idioma',
    notifications: 'Notificaciones',
    security: 'Seguridad',
    support: 'Soporte',
    about: 'Acerca de',
    termsAndConditions: 'Términos y Condiciones',
    privacyPolicy: 'Política de Privacidad',
    version: 'Versión',
    mxiBalance: 'Saldo MXI',
    usdtBalance: 'Saldo USDT',
    currentPrice: 'Precio Actual',
    priceChange24h: 'Cambio 24h',
    marketCap: 'Capitalización',
    volume24h: 'Volumen 24h',
    buyMXI: 'Comprar MXI',
    sellMXI: 'Vender MXI',
    amount: 'Cantidad',
    total: 'Total',
    buy: 'Comprar',
    sell: 'Vender',
    cancel: 'Cancelar',
    confirm: 'Confirmar',
    success: 'Éxito',
    error: 'Error',
    loading: 'Cargando...',
    pleaseWait: 'Por favor espera...',
    somethingWentWrong: 'Algo salió mal',
    tryAgain: 'Intentar de Nuevo',
    noDataAvailable: 'No hay datos disponibles',
    refresh: 'Actualizar',
    search: 'Buscar',
    filter: 'Filtrar',
    sort: 'Ordenar',
    apply: 'Aplicar',
    reset: 'Restablecer',
    save: 'Guardar',
    edit: 'Editar',
    delete: 'Eliminar',
    view: 'Ver',
    close: 'Cerrar',
    back: 'Atrás',
    next: 'Siguiente',
    previous: 'Anterior',
    finish: 'Finalizar',
    skip: 'Omitir',
    done: 'Hecho',
    yes: 'Sí',
    no: 'No',
    ok: 'OK',
    payWithUSDT: 'Pagar con USDT',
    paymentHistory: 'Historial de Pagos',
    pendingPayments: 'Pagos Pendientes',
    completedPayments: 'Pagos Completados',
    failedPayments: 'Pagos Fallidos',
    paymentDetails: 'Detalles del Pago',
    paymentId: 'ID de Pago',
    paymentDate: 'Fecha de Pago',
    paymentAmount: 'Monto del Pago',
    paymentStatus: 'Estado del Pago',
    paymentMethod: 'Método de Pago',
    transactionId: 'ID de Transacción',
    blockchainExplorer: 'Explorador de Blockchain',
    viewOnExplorer: 'Ver en Explorador',
    copyTransactionId: 'Copiar ID de Transacción',
    shareTransaction: 'Compartir Transacción',
    downloadReceipt: 'Descargar Recibo',
    contactSupport: 'Contactar Soporte',
    reportIssue: 'Reportar Problema',
    faq: 'Preguntas Frecuentes',
    helpCenter: 'Centro de Ayuda',
    tutorials: 'Tutoriales',
    documentation: 'Documentación',
    community: 'Comunidad',
    forum: 'Foro',
    blog: 'Blog',
    news: 'Noticias',
    updates: 'Actualizaciones',
    announcements: 'Anuncios',
    maintenance: 'Mantenimiento',
    downtime: 'Tiempo de Inactividad',
    scheduled: 'Programado',
    unscheduled: 'No Programado',
    resolved: 'Resuelto',
    investigating: 'Investigando',
    identified: 'Identificado',
    monitoring: 'Monitoreando',
    update: 'Actualizar',
    onlyUseCommissionsOrChallenges: 'Aviso Informativo: Los torneos están siendo implementados. Se estará actualizando hasta alcanzar una funcionalidad y calidad óptima, a medida que se desarrolle el Proyecto.',
  },
  pt: {
    welcome: 'Bem-vindo ao Pool de Liquidez MXI',
    login: 'Entrar',
    register: 'Registrar',
    email: 'E-mail',
    password: 'Senha',
    confirmPassword: 'Confirmar Senha',
    fullName: 'Nome Completo',
    idNumber: 'Número de Identificação',
    address: 'Endereço',
    forgotPassword: 'Esqueceu sua senha?',
    dontHaveAccount: 'Não tem uma conta?',
    alreadyHaveAccount: 'Já tem uma conta?',
    signUp: 'Registrar',
    signIn: 'Entrar',
    home: 'Início',
    profile: 'Perfil',
    referrals: 'Indicações',
    withdraw: 'Retirar',
    deposit: 'Depositar',
    poolProgress: 'Progresso do Pool',
    participants: 'Participantes',
    totalRaised: 'Total Arrecadado',
    launchCountdown: 'Contagem Regressiva',
    yourBalance: 'Seu Saldo',
    referralCode: 'Código de Indicação',
    copyCode: 'Copiar Código',
    shareCode: 'Compartilhar Código',
    referralStats: 'Estatísticas de Indicações',
    level1: 'Nível 1',
    level2: 'Nível 2',
    level3: 'Nível 3',
    totalCommissions: 'Comissões Totais',
    availableToWithdraw: 'Disponível para Retirar',
    withdrawalRequirements: 'Requisitos de Retirada',
    requirement1: '5 indicações ativas de Nível 1',
    requirement2: 'Ciclo de 10 dias completado',
    withdrawFunds: 'Retirar Fundos',
    depositFunds: 'Depositar Fundos',
    minimumDeposit: 'Depósito Mínimo',
    maximumDeposit: 'Depósito Máximo',
    connectBinanceWallet: 'Conectar Carteira Binance',
    transactionHistory: 'Histórico de Transações',
    logout: 'Sair',
    settings: 'Configurações',
    language: 'Idioma',
    notifications: 'Notificações',
    security: 'Segurança',
    support: 'Suporte',
    about: 'Sobre',
    termsAndConditions: 'Termos e Condições',
    privacyPolicy: 'Política de Privacidade',
    version: 'Versão',
    mxiBalance: 'Saldo MXI',
    usdtBalance: 'Saldo USDT',
    currentPrice: 'Preço Atual',
    priceChange24h: 'Mudança 24h',
    marketCap: 'Capitalização',
    volume24h: 'Volume 24h',
    buyMXI: 'Comprar MXI',
    sellMXI: 'Vender MXI',
    amount: 'Quantidade',
    total: 'Total',
    buy: 'Comprar',
    sell: 'Vender',
    cancel: 'Cancelar',
    confirm: 'Confirmar',
    success: 'Sucesso',
    error: 'Erro',
    loading: 'Carregando...',
    pleaseWait: 'Por favor aguarde...',
    somethingWentWrong: 'Algo deu errado',
    tryAgain: 'Tentar Novamente',
    noDataAvailable: 'Nenhum dado disponível',
    refresh: 'Atualizar',
    search: 'Buscar',
    filter: 'Filtrar',
    sort: 'Ordenar',
    apply: 'Aplicar',
    reset: 'Redefinir',
    save: 'Salvar',
    edit: 'Editar',
    delete: 'Excluir',
    view: 'Ver',
    close: 'Fechar',
    back: 'Voltar',
    next: 'Próximo',
    previous: 'Anterior',
    finish: 'Finalizar',
    skip: 'Pular',
    done: 'Concluído',
    yes: 'Sim',
    no: 'Não',
    ok: 'OK',
    payWithUSDT: 'Pagar com USDT',
    paymentHistory: 'Histórico de Pagamentos',
    pendingPayments: 'Pagamentos Pendentes',
    completedPayments: 'Pagamentos Concluídos',
    failedPayments: 'Pagamentos Falhados',
    paymentDetails: 'Detalhes do Pagamento',
    paymentId: 'ID do Pagamento',
    paymentDate: 'Data do Pagamento',
    paymentAmount: 'Valor do Pagamento',
    paymentStatus: 'Status do Pagamento',
    paymentMethod: 'Método de Pagamento',
    transactionId: 'ID da Transação',
    blockchainExplorer: 'Explorador de Blockchain',
    viewOnExplorer: 'Ver no Explorador',
    copyTransactionId: 'Copiar ID da Transação',
    shareTransaction: 'Compartilhar Transação',
    downloadReceipt: 'Baixar Recibo',
    contactSupport: 'Contatar Suporte',
    reportIssue: 'Reportar Problema',
    faq: 'Perguntas Frequentes',
    helpCenter: 'Centro de Ajuda',
    tutorials: 'Tutoriais',
    documentation: 'Documentação',
    community: 'Comunidade',
    forum: 'Fórum',
    blog: 'Blog',
    news: 'Notícias',
    updates: 'Atualizações',
    announcements: 'Anúncios',
    maintenance: 'Manutenção',
    downtime: 'Tempo de Inatividade',
    scheduled: 'Programado',
    unscheduled: 'Não Programado',
    resolved: 'Resolvido',
    investigating: 'Investigando',
    identified: 'Identificado',
    monitoring: 'Monitorando',
    update: 'Atualizar',
    onlyUseCommissionsOrChallenges: 'Aviso Informativo: Os torneios estão sendo implementados. Serão atualizados até atingir funcionalidade e qualidade ideais, à medida que o Projeto se desenvolve.',
  },
};

// Create i18n instance
export const i18n = new I18n(translations);

// Set default language
i18n.defaultLocale = 'es';
i18n.locale = 'es';
i18n.enableFallback = true;

const LANGUAGE_KEY = '@app_language';

// Initialize language from storage or device locale
export const initializeLanguage = async (): Promise<void> => {
  try {
    const savedLanguage = await AsyncStorage.getItem(LANGUAGE_KEY);
    if (savedLanguage && ['en', 'es', 'pt'].includes(savedLanguage)) {
      i18n.locale = savedLanguage;
    } else {
      // Get device locale
      const deviceLocale = Localization.getLocales()[0]?.languageCode || 'es';
      const supportedLocale = ['en', 'es', 'pt'].includes(deviceLocale) ? deviceLocale : 'es';
      i18n.locale = supportedLocale;
      await AsyncStorage.setItem(LANGUAGE_KEY, supportedLocale);
    }
  } catch (error) {
    console.error('Error initializing language:', error);
    i18n.locale = 'es';
  }
};

// Set and save language
export const setLanguage = async (language: 'en' | 'es' | 'pt'): Promise<void> => {
  try {
    i18n.locale = language;
    await AsyncStorage.setItem(LANGUAGE_KEY, language);
  } catch (error) {
    console.error('Error setting language:', error);
  }
};

// Get current language
export const getCurrentLanguage = (): 'en' | 'es' | 'pt' => {
  return i18n.locale as 'en' | 'es' | 'pt';
};
